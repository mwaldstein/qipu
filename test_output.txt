   Compiling qipu v0.0.113 (/home/micah/dev/qipu)
warning: use of deprecated associated function `assert_cmd::Command::cargo_bin`: incompatible with a custom cargo build-dir, see instead `cargo::cargo_bin_cmd!`
 --> tests/cli/rewrite_links.rs:6:26
  |
6 |     assert_cmd::Command::cargo_bin("qipu").unwrap()
  |                          ^^^^^^^^^
  |
  = note: `#[warn(deprecated)]` on by default

warning: `qipu` (test "cli_tests") generated 1 warning
warning: unused variable: `note1`
   --> src/commands/list.rs:693:13
    |
693 |         let note1 = store
    |             ^^^^^ help: if this is intentional, prefix it with an underscore: `_note1`
    |
    = note: `#[warn(unused_variables)]` (part of `#[warn(unused)]`) on by default

warning: `qipu` (bin "qipu" test) generated 1 warning (run `cargo fix --bin "qipu" -p qipu --tests` to apply 1 suggestion)
    Finished `test` profile [unoptimized + debuginfo] target(s) in 1.52s
     Running unittests src/main.rs (target/debug/deps/qipu-a878297a31ba8fb9)

running 233 tests
test commands::capture::tests::test_generate_title_empty ... ok
test commands::capture::tests::test_generate_title_from_heading ... ok
test commands::capture::tests::test_generate_title_skip_empty ... ok
test commands::capture::tests::test_generate_title_truncate ... ok
test cli::tests::test_parse_cli_version ... ok
test cli::tests::test_parse_create ... ok
test cli::tests::test_parse_list_with_min_value ... ok
test cli::tests::test_parse_list_with_filters ... ok
test cli::tests::test_parse_create_with_options ... ok
test commands::capture::tests::test_generate_title_simple ... ok
test commands::capture::tests::test_truncate_title_word_boundary ... ok
test commands::context::budget::tests::test_estimate_note_size ... ok
test commands::doctor::tests::test_doctor_compaction_multiple_compactors ... ok
test commands::doctor::tests::test_doctor_compaction_self_compaction ... ok
test commands::doctor::tests::test_doctor_compaction_cycle ... ok
test cli::tests::test_parse_format ... ok
test commands::doctor::tests::test_doctor_value_range_boundary ... ok
test commands::doctor::tests::test_doctor_value_range_invalid ... ok
test commands::doctor::tests::test_doctor_value_range_none ... ok
test cli::tests::test_parse_invalid_log_level ... ok
test cli::tests::test_parse_cli_help ... ok
test cli::tests::test_parse_log_level_case_insensitive ... ok
test commands::doctor::tests::test_doctor_compaction_valid ... ok
test cli::tests::test_parse_init ... ok
test commands::doctor::tests::test_doctor_value_range_valid ... ok
test commands::link::tests::test_direction_parsing ... ok
test commands::link::tests::test_direction_parsing_invalid ... ok
test commands::link::tests::test_tree_options_default ... ok
test cli::tests::test_parse_list ... ok
test cli::tests::test_parse_valid_log_levels ... ok
test commands::list::tests::test_list_empty_store_json ... ok
test commands::list::tests::test_list_empty_store_records ... ok
test commands::doctor::tests::test_doctor_healthy_store ... ok
test commands::doctor::tests::test_doctor_duplicate_ids ... ok
test commands::doctor::tests::test_doctor_semantic_link_self_referential_same_as ... ok
test commands::doctor::tests::test_doctor_semantic_link_self_referential_alias_of ... ok
test commands::list::tests::test_list_empty_store_human ... ok
test commands::doctor::tests::test_doctor_broken_links ... ok
test commands::list::tests::test_list_empty_store_quiet ... ok
test commands::doctor::tests::test_doctor_attachments ... ok
test commands::doctor::tests::test_doctor_semantic_link_mixed_identity_types ... ok
test commands::list::tests::test_list_filter_by_min_value_none_match ... ok
test commands::list::tests::test_list_compaction_annotations_json ... ok
test commands::list::tests::test_list_compaction_annotations_records ... ok
test commands::list::tests::test_list_all_formats_compaction_with_ids ... ok
test commands::prime::tests::test_max_constants ... ok
test commands::doctor::tests::test_doctor_semantic_link_conflicting_support_contradict ... ok
test commands::doctor::tests::test_doctor_semantic_link_valid_relationships ... ok
test commands::list::tests::test_list_compaction_annotations_human ... ok
test commands::list::tests::test_list_filter_by_tag_none_matching ... ok
test commands::list::tests::test_list_filter_by_min_value_exact ... ok
test commands::list::tests::test_list_filter_by_min_value_all_match ... ok
test commands::list::tests::test_list_single_note_human ... ok
test commands::list::tests::test_list_single_note_records ... ok
test commands::list::tests::test_list_single_note_json ... ok
test commands::list::tests::test_list_filter_by_min_value_with_defaults ... ok
test commands::list::tests::test_list_filter_by_since ... ok
test commands::list::tests::test_list_filter_by_min_value_some_match ... ok
test commands::list::tests::test_list_filter_by_tag ... ok
test commands::search::tests::test_search_empty_query ... ok
test commands::list::tests::test_list_multiple_notes ... ok
test commands::setup::tests::test_execute_check_human ... ok
test commands::setup::tests::test_execute_check_installed ... ok
test commands::list::tests::test_list_filter_by_type ... ok
test commands::setup::tests::test_execute_check_not_installed ... ok
test commands::setup::tests::test_execute_check_unknown_tool ... ok
test commands::setup::tests::test_execute_install_already_exists ... ok
test commands::setup::tests::test_execute_install_json ... ok
test commands::setup::tests::test_execute_install_records ... ok
test commands::setup::tests::test_execute_install_success ... ok
test commands::setup::tests::test_execute_install_unknown_tool ... ok
test commands::setup::tests::test_execute_list_human ... ok
test commands::setup::tests::test_execute_list_json ... ok
test commands::setup::tests::test_execute_json_output_all_branches ... ok
test commands::setup::tests::test_execute_list_records ... ok
test commands::setup::tests::test_execute_print_human ... ok
test commands::setup::tests::test_execute_no_args ... ok
test commands::setup::tests::test_execute_print_records ... ok
test commands::setup::tests::test_execute_print_json ... ok
test commands::setup::tests::test_execute_records_output_all_branches ... ok
test commands::setup::tests::test_execute_remove_json ... ok
test commands::setup::tests::test_execute_remove_not_found ... ok
test commands::setup::tests::test_execute_remove_records ... ok
test commands::setup::tests::test_execute_remove_success ... ok
test commands::setup::tests::test_execute_remove_unknown_tool ... ok
test commands::setup::tests::test_execute_with_list_flag ... ok
test commands::setup::tests::test_execute_with_print_flag ... ok
test commands::setup::tests::test_execute_with_check_flag ... ok
test commands::setup::tests::test_execute_with_remove_flag ... ok
test commands::list::tests::test_list_with_compaction_disabled ... ok
test commands::search::tests::test_search_no_results ... ok
test commands::search::tests::test_search_json_format ... ok
test commands::search::tests::test_search_no_resolve_compaction ... ok
test commands::search::tests::test_search_quiet_no_results ... ok
test commands::list::tests::test_list_with_compaction_ids_depth ... ok
test commands::search::tests::test_search_exclude_mocs ... ok
test commands::list::tests::test_list_with_compaction_resolved ... ok
test commands::search::tests::test_search_verbose_output ... ok
test commands::search::tests::test_search_records_format ... ok
test commands::list::tests::test_list_with_compaction_ids ... ok
test lib::compaction::context::tests::test_canon_multi_level ... ok
test lib::compaction::context::tests::test_canon_no_compaction ... ok
test lib::compaction::context::tests::test_canon_single_level ... ok
test lib::compaction::context::tests::test_cycle_detection ... ok
test lib::compaction::context::tests::test_multiple_compactors_error ... ok
test lib::compaction::validation::tests::test_validate_self_compaction ... ok
test lib::config::tests::test_default_config ... ok
test lib::config::tests::test_save_and_load ... ok
test lib::config::tests::test_save_and_load_with_absolute_store_path ... ok
test lib::config::tests::test_save_and_load_with_store_path ... ok
test lib::config::tests::test_stemming_config_can_be_disabled ... ok
test lib::config::tests::test_stemming_config_defaults_to_true ... ok
test commands::search::tests::test_search_compaction_resolution ... ok
test commands::show::tests::test_show_by_file_path ... ok
test commands::search::tests::test_search_with_compaction_ids ... ok
test commands::show::tests::test_show_json_format ... ok
test commands::show::tests::test_show_by_id ... ok
test commands::search::tests::test_search_with_tag_filter ... ok
test commands::search::tests::test_search_multiple_results ... ok
test commands::search::tests::test_search_with_type_filter ... ok
test commands::show::tests::test_show_links_json_format ... ok
test commands::show::tests::test_show_nonexistent_id ... ok
test commands::show::tests::test_show_links_records_format ... ok
test commands::show::tests::test_show_links_mode ... ok
test commands::show::tests::test_show_verbose ... ok
test lib::db::tests::test_database_open_creates_tables ... ok
test commands::search::tests::test_search_sort_by_value ... ok
test commands::show::tests::test_show_records_format ... ok
test commands::show::tests::test_show_with_compaction_ids ... ok
test commands::search::tests::test_search_with_min_value_filter ... ok
test lib::db::tests::test_empty_store_rebuild ... ok
test commands::show::tests::test_show_no_resolve_compaction ... ok
test lib::db::tests::test_incremental_repair_handles_empty_database ... ok
test commands::show::tests::test_show_with_compaction_resolution ... ok
test lib::db::tests::test_schema_version_matches_current ... ok
test lib::db::tests::test_database_rebuild_cleans_old_data ... ok
test lib::db::tests::test_schema_version_set_on_fresh_install ... ok
test lib::db::tests::test_database_rebuild_populates_notes ... ok
test lib::db::tests::test_insert_note_with_fts ... ok
test lib::db::tests::test_incremental_repair_updates_last_sync ... ok
test lib::db::tests::test_incremental_repair_removes_deleted_notes ... ok
test lib::db::tests::test_search_empty_query ... ok
test lib::db::tests::test_incremental_repair_updates_changed_notes ... ok
test lib::format::tests::test_format_display ... ok
test lib::format::tests::test_format_parsing ... ok
test lib::format::tests::test_unknown_format ... ok
test lib::git::tests::test_git_availability ... ok
test lib::db::tests::test_get_backlinks ... ok
test lib::db::tests::test_search_fts_tag_boost ... ok
test lib::db::tests::test_search_fts_basic ... ok
test lib::db::tests::test_schema_version_outdated_rebuilds ... ok
test lib::db::tests::test_search_with_type_filter ... ok
test lib::db::tests::test_search_with_tag_filter ... ok
test lib::graph::bfs::tests::test_heap_entry_ordering ... ok
test lib::graph::types::tests::test_get_edge_cost_boundary ... ok
test lib::graph::types::tests::test_get_edge_cost_custom_link_type ... ok
test lib::graph::types::tests::test_get_edge_cost_max_value ... ok
test lib::graph::types::tests::test_get_edge_cost_mid_value ... ok
test lib::graph::types::tests::test_get_edge_cost_min_value ... ok
test lib::graph::types::tests::test_get_link_type_cost_default ... ok
test lib::graph::types::tests::test_get_link_type_cost_unknown ... ok
test lib::graph::types::tests::test_hop_cost_addition ... ok
test lib::graph::types::tests::test_hop_cost_default ... ok
test lib::graph::types::tests::test_hop_cost_fractional ... ok
test lib::graph::types::tests::test_hop_cost_from_u32 ... ok
test lib::graph::types::tests::test_tree_options_custom_max_hops ... ok
test lib::graph::types::tests::test_tree_options_default_max_hops ... ok
test lib::graph::types::tests::test_tree_options_ignore_value_default ... ok
test lib::graph::types::tests::test_tree_options_ignore_value_true ... ok
test lib::id::tests::test_filename ... ok
test lib::id::tests::test_generate_hash_id ... ok
test lib::id::tests::test_generate_ulid ... ok
test lib::id::tests::test_slugify ... ok
test lib::index::tests::test_extract_markdown_relative_path_links ... ok
test lib::index::tests::test_extract_typed_links ... ok
test lib::index::tests::test_extract_wiki_links ... ok
test lib::index::tests::test_index_new ... ok
test lib::index::tests::test_markdown_links_skip_external_urls ... ok
test lib::index::tests::test_markdown_links_with_qipu_id ... ok
test lib::db::tests::test_validate_consistency_count_mismatch ... ok
test lib::db::tests::test_validate_consistency_missing_file ... ok
test lib::index::tests::test_rewrite_wiki_links_multiple ... ok
test lib::db::tests::test_validate_consistency_matching_state ... ok
test lib::index::tests::test_rewrite_wiki_links_no_links ... ok
test lib::note::tests::test_extract_first_paragraph ... ok
test lib::note::tests::test_extract_summary_section ... ok
test lib::note::tests::test_link_type_parsing ... ok
test lib::note::tests::test_note_to_markdown ... ok
test lib::note::tests::test_note_type_parsing ... ok
test lib::index::tests::test_rewrite_wiki_links_simple ... ok
test lib::note::tests::test_parse_note ... ok
test lib::index::tests::test_rewrite_wiki_links_with_label ... ok
test lib::note::tests::test_summary_fallback_to_section ... ok
test lib::records::tests::test_escape_quotes ... ok
test lib::note::tests::test_summary_from_frontmatter ... ok
test lib::similarity::tests::test_find_by_shared_tags ... ok
test lib::similarity::tests::test_find_by_2hop_neighborhood ... ok
test lib::similarity::tests::test_similarity_calculation ... ok
test lib::similarity::tests::test_similarity_with_stemming ... ok
test lib::index::tests::test_unresolved_links ... ok
test lib::db::tests::test_startup_validation_skips_rebuild_if_empty_db_no_notes ... ok
test lib::store::tests::test_discover_with_custom_store_path ... ok
test lib::store::tests::test_discover_without_custom_store_path ... ok
test lib::db::tests::test_search_limit ... ok
test lib::db::tests::test_validate_consistency_mtime_mismatch ... ok
test lib::text::tests::test_stemming_matches_similar_words ... ok
test lib::text::tests::test_tokenize_basic ... ok
test lib::text::tests::test_tokenize_empty_after_stop_words ... ok
test lib::text::tests::test_tokenize_keeps_content_words ... ok
test lib::text::tests::test_tokenize_mixed_stop_and_content ... ok
test lib::text::tests::test_tokenize_preserves_capitalization_in_lowercase ... ok
test lib::text::tests::test_tokenize_removes_stop_words ... ok
test lib::text::tests::test_tokenize_with_stemming_disabled ... ok
test lib::text::tests::test_tokenize_with_stemming_enabled ... ok
test lib::db::tests::test_traverse_both_directions ... ok
test lib::db::tests::test_traverse_inbound ... ok
test lib::db::tests::test_traverse_max_hops ... ok
test lib::db::tests::test_startup_validation_rebuilds_if_empty_db_has_notes ... ok
test lib::db::tests::test_traverse_max_nodes ... ok
test lib::store::tests::test_init_store ... ok
test lib::store::tests::test_init_visible ... ok
test lib::store::tests::test_discover_store ... ok
test lib::store::tests::test_create_note ... ok
test lib::db::tests::test_traverse_outbound ... ok
test lib::store::tests::test_store_without_config ... ok
test lib::store::tests::test_list_notes ... ok
test lib::graph::bfs::tests::test_dijkstra_traverse_min_value_filter ... ok
test lib::graph::bfs::tests::test_dijkstra_traverse_weighted ... ok
test lib::graph::bfs::tests::test_dijkstra_traverse_unweighted ... ok
test lib::graph::bfs::tests::test_bfs_find_path_unweighted ... ok
test lib::graph::bfs::tests::test_bfs_find_path_weighted ... ok
test lib::db::tests::test_validate_consistency_samples_multiple_notes ... ok
test lib::graph::bfs::tests::test_bfs_find_path_min_value_filter ... ok

test result: ok. 233 passed; 0 failed; 0 ignored; 0 measured; 0 filtered out; finished in 0.82s

     Running tests/cli_tests.rs (target/debug/deps/cli_tests-be68c2b649b14f4b)

running 265 tests
test cli::capture::test_capture_auto_title_from_content ... ok
test cli::capture::test_capture_basic ... ok
test cli::capture::test_capture_auto_title_empty_content ... ok
test cli::capture::test_capture_verbose_output ... ok
test cli::capture::test_capture_default_type_fleeting ... ok
test cli::capture::test_capture_auto_title_from_heading ... ok
test cli::capture::test_capture_content_preservation ... ok
test cli::capture::test_capture_with_id ... ok
test cli::capture::test_capture_records_no_tags ... ok
test cli::capture::test_capture_with_title ... ok
test cli::capture::test_capture_with_type ... ok
test cli::capture::test_capture_multiple_tags_json ... ok
test cli::capture::test_capture_with_tags ... ok
test cli::capture::test_capture_json_with_provenance ... ok
test cli::capture::test_capture_json_format ... ok
test cli::capture::test_capture_empty_content ... ok
test cli::capture::test_capture_records_with_tags ... ok
test cli::context::basic::test_context_missing_store ... ok
test cli::capture::test_capture_records_format ... ok
test cli::capture::test_capture_with_provenance ... ok
test cli::capture::test_capture_web_defaults ... ok
test cli::context::basic::test_context_no_selection ... ok
test cli::context::basic::test_context_nonexistent_note ... ok
test cli::context::basic::test_context_by_note_id ... ok
test cli::context::basic::test_context_safety_banner ... ok
test cli::context::basic::test_context_records_with_body_and_sources ... ok
test cli::compact::commands::test_compact_status ... ok
test cli::context::basic::test_context_filter_by_min_value ... ok
test cli::context::basic::test_context_by_tag ... ok
test cli::compact::commands::test_compact_show ... ok
test cli::compact::commands::test_compact_show_truncation ... ok
test cli::context::basic::test_context_by_query ... ok
test cli::context::basic::test_context_by_moc ... ok
test cli::context::basic::test_context_backlinks ... ok
test cli::context::basic::test_context_related_expansion ... ok
test cli::compact::commands::test_compact_suggest ... ok
test cli::context::formats::test_context_json_format ... ok
test cli::context::formats::test_context_records_escapes_quotes_in_title ... ok
test cli::context::formats::test_context_json_with_provenance ... ok
test cli::context::formats::test_context_records_format ... ok
test cli::context::formats::test_context_records_safety_banner ... ok
test cli::context::budget::test_context_max_chars ... ok
test cli::context::compaction::test_context_expand_compaction_human_format ... ok
test cli::context::compaction::test_context_expand_compaction_json_format ... ok
test cli::context::formats::test_context_records_without_safety_banner ... ok
test cli::context::compaction::test_context_expand_compaction_records_format ... ok
test cli::create::test_create_json_format ... ok
test cli::compact::commands::test_compact_report ... ok
test cli::create::test_create_note ... ok
test cli::doctor::test_doctor_missing_store ... ok
test cli::context::budget::test_context_shows_excluded_notes ... ok
test cli::context::compaction::test_context_expand_compaction_with_depth ... ok
test cli::compact::annotations::test_compaction_annotations ... ok
test cli::create::test_create_json_with_provenance ... ok
test cli::create::test_create_with_type ... ok
test cli::create::test_create_with_tags ... ok
test cli::create::test_create_prompt_hash_in_frontmatter ... ok
test cli::doctor::test_doctor_compaction_cycle_detection ... ok
test cli::context::basic::test_context_transitive_moc_traversal ... ok
test cli::doctor::test_doctor_compaction_multiple_compactors ... ok
test cli::doctor::test_doctor_fix_flag ... ok
test cli::context::budget::test_context_prefers_typed_links_over_related ... ok
test cli::doctor::test_doctor_healthy_store ... ok
test cli::context::budget::test_context_budget_exact ... ok
test cli::doctor::test_doctor_json_format ... ok
test cli::doctor::test_doctor_duplicates_threshold ... ok
test cli::doctor::test_doctor_broken_link_detection ... ok
test cli::doctor::test_doctor_records_format ... ok
test cli::export::test_export_basic ... ok
test cli::export::test_export_anchor_links_point_to_existing_anchors ... ok
test cli::export::test_export_bundle_preserves_moc_order ... ok
test cli::export::test_export_outline_fallback_to_bundle_without_moc ... ok
test cli::export::test_export_bundle_rewrites_links_to_anchors ... ok
test cli::inbox::test_inbox_empty ... ok
test cli::export::test_export_outline_anchors ... ok
test cli::export::test_export_with_attachments ... ok
test cli::export::test_export_outline_preserves_moc_order ... ok
test cli::inbox::test_inbox_excludes_permanent ... ok
test cli::inbox::test_inbox_shows_fleeting ... ok
test cli::index::test_index_empty_store ... ok
test cli::index::test_index_json_format ... ok
test cli::index::test_index_records_format ... ok
test cli::index::test_index_stemming_can_be_disabled ... ok
test cli::index::test_index_rebuild ... ok
test cli::index::test_index_stemming_enabled_by_default ... ok
test cli::index::test_index_extracts_relative_path_markdown_links ... ok
test cli::init::test_cache_migration_on_any_command ... ok
test cli::inbox::test_inbox_exclude_linked ... ok
test cli::init::test_init_branch_json_output ... ok
test cli::init::test_init_branch_saves_config ... ok
test cli::index::test_index_with_notes ... ok
test cli::init::test_init_branch_workflow ... ok
test cli::init::test_init_creates_store ... ok
test cli::init::test_init_stealth_adds_to_project_gitignore ... ok
test cli::init::test_init_idempotent ... ok
test cli::init::test_init_stealth_creates_gitignore_if_not_exists ... ok
test cli::init::test_init_json_format ... ok
test cli::init::test_init_stealth_creates_store_internal_gitignore ... ok
test cli::init::test_init_visible ... ok
test cli::init::test_init_without_stealth_no_gitignore_created ... ok
test cli::init::test_init_stealth_idempotent ... ok
test cli::dump::test_dump_type_filter_affects_reachability ... ok
test cli::init::test_init_without_stealth_no_project_gitignore_modification ... ok
test cli::dump::test_dump_inline_only_excludes_typed_links ... ok
test cli::dump::test_dump_typed_only_excludes_inline_links ... ok
test cli::dump::test_dump_max_hops_limits_traversal_depth ... ok
test cli::dump::test_dump_direction_filters_traversal ... ok
test cli::link::list::test_link_list_empty ... ok
test cli::link::add_remove::test_link_add_idempotent ... ok
test cli::link::add_remove::test_custom_link_inversion ... ok
test cli::link::add_remove::test_link_add_and_list ... ok
test cli::dump::test_dump_without_filters_includes_all_reachable_notes ... ok
test cli::link::list::test_link_list_json_format ... ok
test cli::link::list::test_link_list_direction_filter ... ok
test cli::link::list::test_link_list_records_format ... ok
test cli::link::add_remove::test_link_remove ... ok
test cli::link::compaction::test_link_list_with_compaction ... ok
test cli::link::path::test_link_path_direct ... ok
test cli::link::compaction::test_link_no_resolve_compaction_flag ... ok
test cli::context::budget::test_context_max_tokens ... ok
test cli::link::list::test_link_list_records_max_chars ... ok
test cli::link::path::test_link_path_direction_both ... ok
test cli::link::compaction::test_link_path_with_compaction ... ok
test cli::link::compaction::test_link_tree_with_compaction ... ok
test cli::link::path::test_link_path_direction_in ... ok
test cli::link::path::test_link_path_json_format ... ok
test cli::link::path::test_link_path_inline_only ... ok
test cli::link::path::test_link_path_exclude_type_filter ... ok
test cli::link::path::test_link_path_not_found ... ok
test cli::link::path::test_link_path_min_value_filter_with_defaults ... ok
test cli::link::path::test_link_path_min_value_filter_excludes_from_note ... ok
test cli::link::path::test_link_path_records_format ... ok
test cli::link::path::test_link_path_min_value_filter_excludes_to_note ... ok
test cli::link::path::test_link_path_min_value_filter_all_match ... ok
test cli::link::path::test_link_path_multi_hop ... ok
test cli::link::path::test_link_path_typed_only ... ok
test cli::link::path::test_link_path_min_value_filter_excludes_intermediate_note ... ok
test cli::link::path::test_link_path_type_filter ... ok
test cli::link::tree::test_link_tree_direction_both ... ok
test cli::link::tree::test_link_tree_direction_in ... ok
test cli::link::tree::test_link_tree_direction_out ... ok
test cli::link::tree::test_link_tree_cycle_shows_seen ... ok
test cli::link::tree::test_link_tree_json_format ... ok
test cli::link::tree::test_link_tree_records_format ... ok
test cli::link::tree::test_link_tree_inline_only ... ok
test cli::link::tree::test_link_tree_exclude_type_filter ... ok
test cli::link::tree::test_link_tree_single_node ... ok
test cli::list::test_list_empty_store ... ok
test cli::link::tree::test_link_tree_min_value_filter_all_match ... ok
test cli::link::tree::test_link_tree_min_value_filter_with_defaults ... ok
test cli::link::tree::test_link_tree_min_value_filter_excludes_root ... ok
test cli::list::test_list_json_format ... ok
test cli::logging::test_default_log_policy_is_warn ... ok
test cli::list::test_list_with_notes ... ok
test cli::list::test_list_filter_by_type ... ok
test cli::list::test_list_filter_by_min_value_none_match ... ok
test cli::logging::test_invalid_log_level_rejected ... ok
test cli::logging::test_log_json_produces_valid_json ... ok
test cli::list::test_list_filter_by_min_value_all_match ... ok
test cli::logging::test_log_level_case_insensitive ... ok
test cli::link::tree::test_link_tree_max_hops ... ok
test cli::list::test_list_filter_by_min_value_with_defaults ... ok
test cli::link::tree::test_link_tree_max_hops_reports_truncation ... ok
test cli::misc::test_help_flag ... ok
test cli::misc::test_duplicate_format_json_usage_error ... ok
test cli::context::budget::test_context_max_tokens_and_chars ... ok
test cli::link::tree::test_link_tree_typed_only ... ok
test cli::misc::test_missing_store_exit_code_3 ... ok
test cli::link::tree::test_link_tree_type_filter ... ok
test cli::misc::test_quiet_flag ... ok
test cli::link::tree::test_link_tree_min_value_filter_some_match ... ok
test cli::logging::test_log_level_debug_shows_debug_messages ... ok
test cli::logging::test_log_level_warn_hides_debug_messages ... ok
test cli::link::tree::test_link_tree_with_links ... ok
test cli::misc::test_store_flag_plain_directory_is_invalid ... ok
test cli::misc::test_subcommand_help ... ok
test cli::misc::test_unknown_argument_json_usage_error ... ok
test cli::misc::test_unknown_argument_json_equals_format_usage_error ... ok
test cli::misc::test_unknown_command_exit_code_2 ... ok
test cli::list::test_list_filter_by_min_value_some_match ... ok
test cli::misc::test_unknown_command_json_usage_error ... ok
test cli::misc::test_unknown_format_exit_code_2 ... ok
test cli::misc::test_unknown_command_json_equals_format_usage_error ... ok
test cli::misc::test_version_flag ... ok
test cli::logging::test_qipu_log_env_overrides_cli_flags ... ok
test cli::prime::test_prime_missing_store ... ok
test cli::logging::test_qipu_log_env_without_target ... ok
test cli::logging::test_verbose_shows_debug_messages ... ok
test cli::link::tree::test_link_tree_spanning_tree_ordering ... ok
test cli::misc::test_explicit_store_path ... ok
test cli::misc::test_invalid_value_json_format ... ok
test cli::misc::test_invalid_since_date_exit_code_2 ... ok
test cli::misc::test_missing_required_arg_json_format ... ok
test cli::misc::test_store_discovery_walks_up ... ok
test cli::logging::test_valid_log_levels_accepted ... ok
test cli::misc::test_relative_store_resolved_against_root ... ok
test cli::misc::test_root_flag_affects_discovery_start_dir ... ok
test cli::misc::test_hidden_store_preferred_over_visible ... ok
test cli::misc::test_visible_store_discovery ... ok
test cli::misc::test_invalid_direction_exit_code_2 ... ok
test cli::misc::test_verbose_flag ... ok
test cli::prime::test_prime_empty_store ... ok
test cli::prime::test_prime_with_mocs ... ok
test cli::search::test_search_empty_store ... ok
test cli::prime::test_prime_json_format ... ok
test cli::prime::test_prime_records_format ... ok
test cli::prime::test_prime_with_recent_notes ... ok
test cli::provenance::test_create_with_provenance ... ok
test cli::provenance::test_llm_generated_can_override_verified ... ok
test cli::provenance::test_llm_generated_defaults_verified_false ... ok
test cli::setup::test_setup_check_installed ... ok
test cli::setup::test_setup_check_not_installed ... ok
test cli::search::test_search_json_format ... ok
test cli::setup::test_setup_install_already_exists ... ok
test cli::search::test_search_finds_title ... ok
test cli::setup::test_setup_install ... ok
test cli::setup::test_setup_list ... ok
test cli::search::test_search_by_tag ... ok
test cli::setup::test_setup_list_json ... ok
test cli::setup::test_setup_no_args_usage_error ... ok
test cli::merge::test_merge_notes_basic ... ok
test cli::setup::test_setup_list_records ... ok
test cli::setup::test_setup_print ... ok
test cli::setup::test_setup_remove_not_exists ... ok
test cli::search::test_search_by_type ... ok
test cli::setup::test_setup_print_json ... ok
test cli::setup::test_setup_unknown_integration ... ok
test cli::setup::test_setup_remove ... ok
test cli::provenance::test_verify_command ... ok
test cli::provenance::test_context_prioritizes_verified ... ok
test cli::search::test_search_exact_tag_match_ranks_above_body ... FAILED
test cli::search::test_search_recency_boost ... ok
test cli::show::test_show_nonexistent ... ok
test cli::sync::test_sync_basic ... ok
test cli::sync::test_sync_validate ... ok
test cli::search::test_search_title_only_match ... ok
test cli::show::test_show_links_no_links ... ok
test cli::search::test_search_title_match_ranks_above_body_match ... FAILED
test cli::show::test_show_note ... ok
test cli::sync::test_sync_push_fails_no_remote ... ok
test cli::workspace::test_workspace_delete_nonexistent ... ok
test cli::search::test_search_sort_by_value_with_defaults ... ok
test cli::search::test_search_title_only_match_with_body_matches ... ok
test cli::rewrite_links::test_index_rewrites_wiki_links ... ok
test cli::sync::test_sync_git_automation ... ok
test cli::workspace::test_workspace_list_shows_primary ... ok
test cli::search::test_search_min_value_and_sort_combined ... ok
test cli::show::test_show_links_records_format ... ok
test cli::search::test_search_sort_by_value ... ok
test cli::workspace::test_workspace_delete_force_with_unmerged_changes ... ok
test cli::workspace::test_workspace_delete_removes_workspace ... ok
test cli::search::test_search_with_min_value_filter ... ok
test cli::workspace::test_workspace_list_json_format ... ok
test cli::workspace::test_workspace_list_records_format ... ok
test cli::workspace::test_workspace_delete_with_unmerged_changes ... ok
test cli::workspace::test_workspace_new_creates_workspace ... ok
test cli::workspace::test_workspace_new_already_exists ... ok
test cli::workspace::test_workspace_new_empty ... ok
test cli::workspace::test_workspace_new_copy_primary ... ok
test cli::workspace::test_workspace_new_from_note ... ok
test cli::workspace::test_workspace_new_temp ... ok
test cli::workspace::test_workspace_list_shows_workspaces ... ok
test cli::workspace::test_workspace_new_from_query ... ok
test cli::workspace::test_workspace_new_from_tag ... ok
test cli::link::add_remove::test_link_add_remove_updates_database ... ok

failures:

---- cli::search::test_search_exact_tag_match_ranks_above_body stdout ----

thread 'cli::search::test_search_exact_tag_match_ranks_above_body' (11283) panicked at tests/cli/search.rs:506:5:
assertion `left == right` failed: Note with exact tag match should rank first
  left: "Rust Tutorial"
 right: "Programming Language"
note: run with `RUST_BACKTRACE=1` environment variable to display a backtrace

---- cli::search::test_search_title_match_ranks_above_body_match stdout ----
Note file: "/tmp/.tmp6tPakc/.qipu/notes/qp-99b9-xylophone-guide.md"
Content:
---
id: qp-99b9
title: Xylophone Guide
type: fleeting
created: 2026-01-22T05:43:32.669930943Z
---

This document provides guidance on musical instruments.
---

Note file: "/tmp/.tmp6tPakc/.qipu/notes/qp-7200-music-notes.md"
Content:
---
id: qp-7200
title: Music Notes
type: fleeting
created: 2026-01-22T05:43:32.717568977Z
---

The xylophone is a percussion instrument consisting of wooden bars.
---


thread 'cli::search::test_search_title_match_ranks_above_body_match' (11375) panicked at tests/cli/search.rs:418:5:
assertion `left == right` failed: Note with title match should rank first due to 2.0x boost
  left: "Music Notes"
 right: "Xylophone Guide"


failures:
    cli::search::test_search_exact_tag_match_ranks_above_body
    cli::search::test_search_title_match_ranks_above_body_match

test result: FAILED. 263 passed; 2 failed; 0 ignored; 0 measured; 0 filtered out; finished in 16.54s

error: test failed, to rerun pass `--test cli_tests`
