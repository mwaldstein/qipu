Create/update implementation plan.

Source: `src/*`
Specs: `specs/*.md`
Goals: `README.md` (scope and non-goals)
Guidance: `docs/*` (non-spec examples)
Shared lib: `src/lib/*`
Plan: `IMPLEMENTATION_PLAN.md`
Future: `FUTURE_WORK.md`

## TRUST HIERARCHY

1. Code is truth. Specs/docs may be stale or wrong.
2. Tests prove behavior. Read test files to verify claims.
3. Existing plan may be inaccurate. Validate every "complete" item.

## AUDIT PROCESS

For each spec:
1. Read spec requirements
2. Search code for implementation (grep patterns, function names)
3. Check test coverage exists and passes
4. Compare actual behavior vs spec claims
5. Note gaps with file:line references

Use subagents in parallel - one per spec. Each must:
- Read the spec file
- Search src/ for implementation
- Search tests/ for coverage
- Report: implemented (with refs) | partial (what's missing) | not implemented

## WHAT TO LOOK FOR

- TODO/FIXME/unimplemented! in code
- #[ignore] or skip in tests
- Hardcoded/simulated behavior (scaffolds that don't do real work)
- Spec says X, code does Y (mismatches)
- Flag defined in CLI but handler is no-op
- Strategy/option not wired through
- Empty match arms or unreachable branches
- Panics/unwraps hiding incomplete error handling

## PRIORITY DEFINITIONS

- **P1: Correctness bugs** - Code exists but doesn't match spec behavior
- **P2: Missing test coverage** - Feature works but lacks tests
- **P3: Unimplemented but ready** - Spec is clear, implementation can proceed

## CATEGORIZATION

Every spec item must be in exactly one place:
1. **Code** - Implemented and tested
2. **IMPLEMENTATION_PLAN.md** - Ready to implement (P1-P3)
3. **FUTURE_WORK.md** - Not implementation-ready

Items go to FUTURE_WORK.md when:
- Spec marks as optional/future/v2
- Spec is ambiguous and needs clarification
- Depends on unimplemented infrastructure
- Requires design decisions not yet made
- Open questions in spec not resolved

## OUTPUT

Update @IMPLEMENTATION_PLAN.md:
- P1-P3 sections with items grouped by spec
- Each item: checkbox, description, file:line refs
- Completed section: verified working with file refs
- Add audit date to status header

Update @FUTURE_WORK.md:
- Group by spec file
- Each item: description, reason not ready, spec:line ref
- Include open questions from specs
- Mark items that need design work vs clarification

Update @specs/README.md status table:
- Spec/Impl/Tests columns with ✅/⚠️/❌
- Notes column for key gaps
- Update "Last audited" date

## RULES

- Plan only. No code changes.
- Never trust docs. Always verify in code.
- Never assume missing; confirm with code search first.
- Include file:line refs for all claims.
- Preserve completed items unless proven incorrect.
- Remove items from gaps when fixed (don't duplicate).
- Keep items in priority order within sections.
- If a needed feature has no spec, create specs/FILENAME.md first.
- Prefer shared utilities in `src/lib/` over ad-hoc implementations.
- Every spec requirement must be tracked: code, plan, or future work.
- Move items between plan/future as readiness changes.

If no changes required: COMPLETE
