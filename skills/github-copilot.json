{
  "tools": [
    {
      "type": "function",
      "function": {
        "name": "qipu_capture",
        "description": "Quick capture from stdin or command arguments. Creates a new note with the provided content in the Qipu knowledge graph.",
        "parameters": {
          "type": "object",
          "properties": {
            "content": {
              "type": "string",
              "description": "Note content (if not using stdin)"
            },
            "title": {
              "type": "string",
              "description": "Note title"
            },
            "type": {
              "type": "string",
              "enum": ["fleeting", "literature", "permanent", "moc"],
              "description": "Note type (default: fleeting)"
            },
            "tags": {
              "type": "array",
              "items": {
                "type": "string"
              },
              "description": "Tags to apply to the note"
            }
          }
        }
      }
    },
    {
      "type": "function",
      "function": {
        "name": "qipu_search",
        "description": "Full-text search across all notes with ranking and value scoring. Returns relevant notes sorted by relevance and value score.",
        "parameters": {
          "type": "object",
          "properties": {
            "query": {
              "type": "string",
              "description": "Search query string"
            },
            "type": {
              "type": "string",
              "enum": ["fleeting", "literature", "permanent", "moc"],
              "description": "Filter by note type"
            },
            "tag": {
              "type": "string",
              "description": "Filter by tag"
            },
            "min_value": {
              "type": "integer",
              "minimum": 0,
              "maximum": 100,
              "description": "Minimum value score (0-100)"
            },
            "limit": {
              "type": "integer",
              "description": "Maximum number of results"
            }
          },
          "required": ["query"]
        }
      }
    },
    {
      "type": "function",
      "function": {
        "name": "qipu_show",
        "description": "Display a single note with optional link information. Useful for reviewing detailed note content.",
        "parameters": {
          "type": "object",
          "properties": {
            "id": {
              "type": "string",
              "description": "Note ID (qp- prefixed ULID)"
            },
            "links": {
              "type": "boolean",
              "description": "Show link connections"
            }
          },
          "required": ["id"]
        }
      }
    },
    {
      "type": "function",
      "function": {
        "name": "qipu_link_add",
        "description": "Create a typed semantic link between two notes. Use this to build connections in the knowledge graph with explicit relationship types.",
        "parameters": {
          "type": "object",
          "properties": {
            "from_id": {
              "type": "string",
              "description": "Source note ID"
            },
            "to_id": {
              "type": "string",
              "description": "Target note ID"
            },
            "link_type": {
              "type": "string",
              "enum": ["related", "derived-from", "supports", "contradicts", "part-of", "answers", "refines", "same-as", "alias-of", "follows"],
              "description": "Semantic relationship type"
            }
          },
          "required": ["from_id", "to_id", "link_type"]
        }
      }
    },
    {
      "type": "function",
      "function": {
        "name": "qipu_link_tree",
        "description": "Visualize the link tree starting from a given note. Shows all connected notes through typed links.",
        "parameters": {
          "type": "object",
          "properties": {
            "id": {
              "type": "string",
              "description": "Root note ID"
            },
            "min_value": {
              "type": "integer",
              "minimum": 0,
              "maximum": 100,
              "description": "Minimum value score threshold"
            },
            "ignore_value": {
              "type": "boolean",
              "description": "Include all notes regardless of value score"
            }
          },
          "required": ["id"]
        }
      }
    },
    {
      "type": "function",
      "function": {
        "name": "qipu_list",
        "description": "List notes with filtering options. Returns a paginated list of notes matching the filters.",
        "parameters": {
          "type": "object",
          "properties": {
            "type": {
              "type": "string",
              "enum": ["fleeting", "literature", "permanent", "moc"],
              "description": "Filter by note type"
            },
            "tag": {
              "type": "string",
              "description": "Filter by tag"
            },
            "since": {
              "type": "string",
              "description": "Filter by creation date (ISO 8601)"
            },
            "min_value": {
              "type": "integer",
              "minimum": 0,
              "maximum": 100,
              "description": "Minimum value score"
            }
          }
        }
      }
    },
    {
      "type": "function",
      "function": {
        "name": "qipu_prime",
        "description": "Generate a context primer for agent sessions. Returns high-value notes and recent research optimized for LLM context injection. Use this at the start of a session to prime the agent with relevant knowledge.",
        "parameters": {
          "type": "object",
          "properties": {
            "limit": {
              "type": "integer",
              "description": "Maximum number of notes to include"
            },
            "min_value": {
              "type": "integer",
              "minimum": 0,
              "maximum": 100,
              "description": "Minimum value score (default: 50)"
            }
          }
        }
      }
    },
    {
      "type": "function",
      "function": {
        "name": "qipu_context",
        "description": "Generate a context bundle for specific use cases. Can generate from a Map of Content, search query, or tag. Returns notes formatted for LLM context injection.",
        "parameters": {
          "type": "object",
          "properties": {
            "moc": {
              "type": "string",
              "description": "Map of Content ID to generate context from"
            },
            "query": {
              "type": "string",
              "description": "Search query to generate context from"
            },
            "tag": {
              "type": "string",
              "description": "Tag to generate context from"
            },
            "min_value": {
              "type": "integer",
              "minimum": 0,
              "maximum": 100,
              "description": "Minimum value score"
            }
          }
        }
      }
    },
    {
      "type": "function",
      "function": {
        "name": "qipu_value_set",
        "description": "Set a note's value score (0-100). Use to prioritize high-quality content (81-100), mark standard research (21-80), or deprioritize stale/duplicate notes (0-20).",
        "parameters": {
          "type": "object",
          "properties": {
            "id": {
              "type": "string",
              "description": "Note ID"
            },
            "score": {
              "type": "integer",
              "minimum": 0,
              "maximum": 100,
              "description": "Value score (0-20: deprioritized, 21-80: standard, 81-100: high-value)"
            }
          },
          "required": ["id", "score"]
        }
      }
    },
    {
      "type": "function",
      "function": {
        "name": "qipu_doctor",
        "description": "Check store health. Detects broken links, orphan notes, duplicates. Optionally auto-fix issues. Use periodically to maintain graph integrity.",
        "parameters": {
          "type": "object",
          "properties": {
            "fix": {
              "type": "boolean",
              "description": "Automatically fix detected issues"
            },
            "duplicates": {
              "type": "boolean",
              "description": "Report duplicate notes"
            }
          }
        }
      }
    }
  ]
}
